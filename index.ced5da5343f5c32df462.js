(()=>{"use strict";const e=["`","1","2","3","4","5","6","7","8","9","0","-","=","backspace","tab","q","w","e","r","t","y","u","i","o","p","[","]","\\","caps lock","a","s","d","f","g","h","j","k","l",";","'","enter","shift-l","z","x","c","v","b","n","m",",",".","/","shift-r","ctrl-l","win","alt-l","space","alt-r","ctrl-r","⇐","⇑","⇓","⇒"],t={a:"KeyA",b:"KeyB",c:"KeyC",d:"KeyD",e:"KeyE",f:"KeyF",g:"KeyG",h:"KeyH",i:"KeyI",j:"KeyJ",k:"KeyK",l:"KeyL",m:"KeyM",n:"KeyN",o:"KeyO",p:"KeyP",q:"KeyQ",r:"KeyR",s:"KeyS",t:"KeyT",u:"KeyU",v:"KeyV",w:"KeyW",x:"KeyX",y:"KeyY",z:"KeyZ",0:"Digit0",1:"Digit1",2:"Digit2",3:"Digit3",4:"Digit4",5:"Digit5",6:"Digit6",7:"Digit7",8:"Digit8",9:"Digit9",space:"Space","`":"Backquote",tab:"Tab",enter:"Enter","shift-l":"ShiftLeft","shift-r":"ShiftRight","ctrl-l":"ControlLeft","ctrl-r":"ControlRight","alt-l":"AltLeft","alt-r":"AltRight","caps lock":"CapsLock",win:"MetaLeft","⇑":"ArrowUp","⇓":"ArrowDown","⇐":"ArrowLeft","⇒":"ArrowRight",backspace:"Backspace","-":"Minus","=":"Equal","[":"BracketLeft","]":"BracketRight",";":"Semicolon","'":"Quote","\\":"Backslash",",":"Comma",".":"Period","/":"Slash"};let a=null;!function(){const e=document.createElement("div");e.className="wrapper wrapper_input";const t=document.createElement("label");t.className="label",t.setAttribute("for","typed-text"),t.textContent="Virtual keyboard for Windows",a=document.createElement("textarea"),a.className="textarea",a.setAttribute("id","typed-text"),a.setAttribute("name","typed-text"),a.setAttribute("rows","10"),a.setAttribute("cols","120"),a.setAttribute("autofocus","true");const n=document.createElement("div");n.className="wrapper";const o=document.createElement("div");o.className="keyboard";for(let e=0;e<5;e+=1){const t=document.createElement("div");t.classList.add("row"),t.classList.add(`row_${e}`),o.appendChild(t)}const c=document.createElement("div");c.className="wrapper";const s=document.createElement("p");s.className="info",s.innerHTML='Current language is <span class="language">English</span>. To switch language press left ctr+alt',document.body.appendChild(e),e.appendChild(t),e.appendChild(a),document.body.appendChild(n),n.appendChild(o),document.body.appendChild(c),c.appendChild(s)}(),e.forEach(((e,t)=>{const a=document.createElement("button");if(a.className="key","caps lock"===e?(a.classList.add("key_caps"),a.classList.add("key_service")):"⇐"===e?(a.classList.add("key_left"),a.classList.add("key_service")):"⇒"===e?(a.classList.add("key_right"),a.classList.add("key_service")):"⇑"===e?(a.classList.add("key_up"),a.classList.add("key_service")):"⇓"===e?(a.classList.add("key_down"),a.classList.add("key_service")):(a.classList.add(`key_${e}`),e.length>1&&a.classList.add("key_service")),a.textContent=e,t<14)document.querySelector(".row_0").appendChild(a);else if(t<28)document.querySelector(".row_1").appendChild(a);else if(t<41)document.querySelector(".row_2").appendChild(a);else if(t<53)document.querySelector(".row_3").appendChild(a);else if("⇑"===e){const e=document.createElement("div");e.classList.add("key_reserve"),document.querySelector(".row_4").appendChild(e),e.appendChild(a)}else"⇓"===e?document.querySelector(".key_reserve").appendChild(a):document.querySelector(".row_4").appendChild(a)}));const n=document.querySelectorAll(".key");n.forEach((e=>{if(t[e.textContent]){e.dataset.code=t[e.textContent];let a=e.textContent.indexOf("-");-1!==a&&e.textContent.length>1&&(e.textContent=e.textContent.slice(0,a))}}));const o=document.querySelector(".textarea");let c=o.selectionStart;document.querySelector(".keyboard").addEventListener("mousedown",(e=>{e.target!==o&&(e.preventDefault(),o.focus(),o.selectionStart=c-1,o.selectionEnd=c-1)})),document.addEventListener("keydown",(e=>{const t=e.code,a=document.querySelector(`.key[data-code="${t}"]`);a&&(a.classList.add("active"),a.textContent===a.textContent.toUpperCase()&&(e.preventDefault(),o.value+=a.textContent))})),document.addEventListener("keyup",(e=>{const t=e.code,a=document.querySelector(`.key[data-code="${t}"]`);a&&a.classList.remove("active")}));const s=[];n.forEach((e=>{e.classList.contains("key_service")||s.push(e)})),document.addEventListener("keydown",(e=>{"CapsLock"===e.code&&(e.getModifierState("CapsLock")?(console.log("Caps Lock turned on"),document.querySelector(".key_caps").classList.add("key_caps_active"),s.forEach((e=>{e.textContent=e.textContent.toUpperCase()}))):(console.log("Caps Lock turned off"),document.querySelector(".key_caps").classList.remove("key_caps_active"),s.forEach((e=>{e.textContent=e.textContent.toLowerCase()}))))}));let l=[];l.push(document.querySelector(".key_shift-l")),l.push(document.querySelector(".key_shift-r")),l.forEach((e=>{e.addEventListener("mousedown",(e=>{s.forEach((e=>{e.textContent=e.textContent.toUpperCase()}))})),e.addEventListener("mouseup",(e=>{s.forEach((e=>{e.textContent=e.textContent.toLowerCase()}))}))})),document.addEventListener("keydown",(e=>{"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||s.forEach((e=>{e.textContent=e.textContent.toUpperCase()}))})),document.addEventListener("keyup",(e=>{"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||s.forEach((e=>{e.textContent=e.textContent.toLowerCase()}))}));const r=["`","1","2","3","4","5","6","7","8","9","0","-","=","backspace","tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\","caps lock","ф","ы","в","а","п","р","о","л","д","ж","э","enter","shift-l","я","ч","с","м","и","т","ь","б","ю",".","shift-r","ctrl-l","win","alt-l","space","alt-r","ctrl-r","⇐","⇑","⇓","⇒"],d=document.querySelector(".language");document.addEventListener("keydown",(t=>{console.log("switchLang"),t.ctrlKey&&t.altKey&&"English"===d.textContent?(document.querySelector(".language").textContent="Russian",n.forEach(((e,t)=>{e.textContent=r[t]}))):t.ctrlKey&&t.altKey&&"Russian"===d.textContent&&(document.querySelector(".language").textContent="English",n.forEach(((t,a)=>{t.textContent=e[a]})))})),window.addEventListener("beforeunload",(function(){localStorage.setItem("language",d.textContent)})),window.addEventListener("load",(function(){localStorage.getItem("language")&&("underfined"===localStorage.getItem("language")?d.textContent="English":d.textContent=localStorage.getItem("language"))})),n.forEach((e=>{e.addEventListener("mousedown",(t=>{if(e.classList.contains("key_service"))switch(e.textContent){case"space":o.value+=" ";break;case"backspace":o.value=o.value.substring(0,o.value.length-1);break;case"tab":o.value+="\t";break;case"enter":o.value+="\n";break;case"shift":console.log("shift");break;case"alt":case"ctrl":console.log("alt");break;case"⇐":o.selectionStart>=1&&(c=o.selectionStart,o.selectionStart=c-1,o.selectionEnd=c-1);break;case"⇒":o.selectionStart<o.value.length&&(console.log(o.selectionStart),c=o.selectionStart,o.selectionStart=c+1,o.selectionEnd=c+1,console.log(o.selectionStart));break;case"⇑":console.log("up");break;case"⇓":console.log("down")}else o.value+=e.textContent}))}))})();